(this["webpackJsonpnith-results"]=this["webpackJsonpnith-results"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},34:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(20),r=c.n(s),i=(c(30),c(3)),o=c(11),l=c(2),u=Object(n.createContext)({}),d=(c(31),c(0));function h(){var e=Object(n.useContext)(u),t=(e.darkMode,e.setDarkMode);return Object(d.jsx)("div",{className:"dark_toggle",onClick:function(){t((function(e){return!e}))},title:"toggle Dark Mode",children:Object(d.jsx)("div",{className:"cover"})})}var b=c(8),j=c.n(b),m=c(14),g=function(){var e=Object(m.a)(j.a.mark((function e(t){var c,n,a,s,r,i,o,l,u,d,h,b,m,g,p,f,O,x,v,N,k,S,L,C,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.branch,n=t.batch,a=t.setLoading,s=t.version,n=n.toString(),"FULL_COLLEGE"===c?r="FULL_COLLEGE":"FULL_YEAR"===c?r="FULL_YEAR - ".concat(n):(r="".concat(c," - ").concat(n),i&&(r+="&next_cursor=".concat(i))),a(!0),u=localStorage.getItem(s+":::"+r),d=!1,u)try{(o=JSON.parse(u)).expires&&(new Date(o.expires).getTime()>(new Date).getTime()?d=!0:(console.log("Cache Expired - ",s+":::"+r),localStorage.removeItem(s+":::"+r)))}catch(j){console.log("Parsing Error - ",j.message)}if(!d){e.next=14;break}l=o.data,i=null,console.log("CACHE HIT",s+":::"+r),a(!1),e.next=74;break;case 14:if("FULL_COLLEGE"!==c){e.next=35;break}console.log("FULL COLLEGE"),b=[],m="";case 18:return console.log("fetching data from "+m),e.next=21,fetch("https://nithp.herokuapp.com/api/result/student?limit=3000&next_cursor=".concat(m));case 21:return h=e.sent,e.next=24,h.json();case 24:g=e.sent,b=b.concat(g.data),m=g.pagination.next_cursor,p=b.length/3e3,a(100*p);case 29:if(""!=m){e.next=18;break}case 30:l=b,o={data:b,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 35:if("FULL_YEAR"!==c){e.next=56;break}console.log("FULL_YEAR"),O=[],x="";case 39:return console.log("fetching data from "+x),e.next=42,fetch("https://nithp.herokuapp.com/api/result/student?roll=".concat(n.slice(2),"%&limit=3000&next_cursor=").concat(x));case 42:return f=e.sent,e.next=45,f.json();case 45:v=e.sent,O=O.concat(v.data),x=v.pagination.next_cursor,N=O.length/3e3,a(100*N);case 50:if(""!=x){e.next=39;break}case 51:l=O,o={data:O,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 56:S=[],L="";case 58:return console.log("fetching data from "+L),e.next=61,fetch("https://nithp.herokuapp.com/api/result/student?branch=".concat(c,"&roll=").concat(n.slice(2),"%&limit=200&next_cursor=").concat(L));case 61:return k=e.sent,e.next=64,k.json();case 64:C=e.sent,S=S.concat(C.data),L=C.pagination.next_cursor,E=S.length/3e3,a(100*E);case 69:if(""!=L){e.next=58;break}case 70:l=S,o={data:S,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o));case 73:a(!1);case 74:return e.abrupt("return",l);case 75:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/student/".concat(t));case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/branches");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/last_updated");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=c(25),v=(c(34),c.p+"static/media/search.fd2a70fa.svg");function N(e){var t,c,a=e.branch,s=e.setBranch,r=e.batch,o=e.setBatch,l=e.setPage,u=(e.page,e.ranking),h=e.setRanking,b=e.searchString,j=e.setSearchString,m=e.cs,g=e.setCs,p=e.downloadCSV,O=Object(n.useState)([]),N=Object(i.a)(O,2),k=N[0],S=N[1];Object(n.useEffect)((function(){f().then((function(e){e&&S([{name:"FULL_COLLEGE",batches:[]},{name:"FULL_YEAR",batches:e[0].batches}].concat(Object(x.a)(e)))})).catch((function(e){console.log(e)}))}),[]);return Object(d.jsxs)("div",{className:"ctrl",children:[Object(d.jsxs)("div",{className:"ser",children:[Object(d.jsx)("img",{src:v,alt:""}),Object(d.jsx)("input",{type:"search",value:b,onChange:function(e){j(e.target.value)},placeholder:"Search by RollNo Name Branch cg:6.9 sg:9:0"})]}),Object(d.jsx)("div",{className:"branch-con",children:Object(d.jsxs)("select",{name:"branch",id:"branch",title:"Branch",value:a,onChange:function(e){s(e.target.value),l(0);var t=k.find((function(t){return t.name==e.target.value}));"FULL_COLLEGE"===e.target.value||t.batches.includes(Number(r))||o(t.batches[t.batches.length-1])},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83d\udcd1 Branch"}),k.map((function(e){return Object(d.jsx)("option",{value:e.name,children:e.name},e.name)}))]})}),Object(d.jsx)("div",{className:"batch-con",children:Object(d.jsxs)("select",{name:"batch",id:"batch",title:"Batch",value:r,onChange:function(e){o(e.target.value),l(0)},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83c\udf93 Batch"}),null===(t=k.find((function(e){return e.name==a})))||void 0===t||null===(c=t.batches)||void 0===c?void 0:c.map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))]})}),Object(d.jsx)("div",{className:"cs",title:"sort: CGPA / SGPA",onClick:function(e){g((function(e){return"c"===e?"s":"c"}))},children:"c"===m?"Cg":"Sg"}),Object(d.jsx)("div",{className:"batch-con ranking-con",children:Object(d.jsxs)("select",{name:"ranking",id:"ranking",title:"Ranking",value:u,onChange:function(e){h(e.target.value)},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83c\udfc6 Ranking"}),Object(d.jsx)("option",{value:"S",children:"Standard '1224'"}),Object(d.jsx)("option",{value:"D",children:"Dense '1223'"}),Object(d.jsx)("option",{value:"O",children:"Ordinal '1234'"})]})}),Object(d.jsx)("div",{className:"csv",onClick:p,title:"download result csv",children:Object(d.jsx)("span",{children:"\ud83c\udf67"})})]})}var k=c(24);c(36);function S(e){var t=e.hits;return Object(d.jsxs)("div",{className:"footer",children:[Object(d.jsx)(k.a,{href:"https://github.com/RohitKaushal7/nith-results","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-icon":"octicon-star","data-show-count":"true","aria-label":"Star RohitKaushal7/nith-results on GitHub",children:"Star"}),Object(d.jsxs)("span",{id:"me",children:["Made with ",Object(d.jsx)("span",{className:"heart",children:"\u2764"})," by"," ",Object(d.jsx)("a",{href:"https://github.com/RohitKaushal7",children:"Rohit Kaushal"}),"."]}),Object(d.jsxs)("span",{id:"ref",children:["API : ",Object(d.jsx)("a",{href:"https://nithp.herokuapp.com/",children:"nithp.herokuapp.com/"})]}),Object(d.jsx)("span",{id:"count",children:t||"hits"})]})}var L=c(21),C=(c(37),c.p+"static/media/hero.d2dd3494.png");function E(e){Object(L.a)(e);var t=Object(n.useContext)(u).version;return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("img",{src:C,alt:"",className:"logo"}),Object(d.jsxs)("div",{className:"main-heading",children:[Object(d.jsx)("b",{children:"NITH RESULTS"}),Object(d.jsx)("span",{className:"date",children:new Date(t).toDateString()})]})]})}c(38);function y(e){var t=e.value,c=e.indeterminate;return Object(d.jsxs)("div",{className:"progress",children:[c&&Object(d.jsx)("div",{className:"indeterminate"}),t&&Object(d.jsx)("div",{className:"determinate",style:{width:t+"%"}})]})}c(39);c(40);function _(e){var t=e.stud,c=e.cs,n="c"===c?t.cgpi:t.sgpi,a="c"===c?t.sgpi:t.cgpi,s=Number(n)>=9.5&&Number(n)<10?"9.5":parseInt(n);return Object(d.jsx)(o.b,{to:"/r/".concat(t.roll),children:Object(d.jsxs)("div",{className:"card","data-rank":t.Rank,"data-base":s,children:[Object(d.jsxs)("div",{className:"rank",children:["#_",t.Rank]}),Object(d.jsx)("div",{className:"name",children:t.name}),Object(d.jsx)("div",{className:"rollno",children:t.roll}),Object(d.jsx)("div",{className:"cgpa",children:n}),Object(d.jsx)("div",{className:"sgpa",children:a}),Object(d.jsx)("div",{className:"branch",children:t.branch}),Object(d.jsx)("div",{className:"year",children:t.roll.slice(0,2)})]})})}c(46);var w=c(23),R=100;function D(e){var t=e.history,c=t.location.search,a=new URLSearchParams(c),s=a.get("branch")?a.get("branch").toUpperCase():null,r=a.get("batch"),o=["S","D","O"].includes(a.get("r"))?a.get("r"):null,l=a.get("q"),h=["c","s"].includes(a.get("cs"))?a.get("cs"):null,b=Number(a.get("p"))&&Number(a.get("p"))>=0?Number(a.get("p")):null,j=Object(n.useState)(s||"FULL_COLLEGE"),m=Object(i.a)(j,2),p=m[0],f=m[1],O=Object(n.useState)(r||((new Date).getFullYear()-1).toString()),x=Object(i.a)(O,2),v=x[0],k=x[1],L=Object(n.useState)(o||"S"),C=Object(i.a)(L,2),D=C[0],F=C[1],I=Object(n.useState)(l||""),U=Object(i.a)(I,2),M=U[0],A=U[1],G=Object(n.useState)(h||"c"),B=Object(i.a)(G,2),J=B[0],P=B[1],T=Object(n.useState)(b||0),V=Object(i.a)(T,2),Y=V[0],H=V[1],K=Object(n.useState)(),q=Object(i.a)(K,2),z=q[0],Q=q[1],W=Object(n.useState)(),X=Object(i.a)(W,2),Z=X[0],$=X[1],ee=Object(n.useState)(),te=Object(i.a)(ee,2),ce=te[0],ne=te[1],ae=Object(n.useState)(),se=Object(i.a)(ae,2),re=se[0],ie=se[1],oe=Object(n.useState)(),le=Object(i.a)(oe,2),ue=le[0],de=le[1],he=Object(n.useState)(),be=Object(i.a)(he,2),je=be[0],me=be[1],ge=Object(n.useContext)(u).version;Object(n.useEffect)((function(){window.location.host.includes("localhost")||fetch("https://api.countapi.xyz/hit/rohitkaushal7/nith_results").then((function(e){return e.json()})).then((function(e){de(e.value)}))}),[]),Object(n.useEffect)((function(){if(ge&&localStorage.getItem("VERSION")!=ge){localStorage.setItem("VERSION",ge),console.log("Clearing Cache for New Version.");for(var e=0;e<100;++e){var t=localStorage.key(e);if(!t)break;t.includes(":::")&&(console.log("CLEARED CACHE - ",t),localStorage.removeItem(t))}}}),[ge]),Object(n.useEffect)((function(){ge&&g({batch:v,branch:p,setLoading:ie,version:ge}).then((function(e){e=e.sort((function(e,t){return"c"===J?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),Q(e)})).catch((function(e){console.error("Failed to Fetch. Err - ",e.message)}))}),[p,v,ge]),Object(n.useEffect)((function(){if(z){var e=JSON.parse(JSON.stringify(z));switch(e.sort((function(e,t){return"c"===J?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),D){case"S":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&(c=n+1),e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&(c=a+1),e[a].Rank=c;return e}(e,J);break;case"D":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&c++,e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&c++,e[a].Rank=c;return e}(e,J);break;case"O":e=function(e,t){return e.forEach((function(e,t){e.Rank=t+1})),e}(e)}ne(e),$(e)}}),[D,z,J]),Object(n.useEffect)((function(){t.replace("/?".concat("FULL_COLLEGE"!==p?"branch=".concat(p,"&batch=").concat(v):"").concat("s"===J?"&cs=".concat(J):"").concat("S"!==D?"&r=".concat(D):"").concat(Y?"&p=".concat(Y):""))}),[p,v,D,J,Y]),Object(n.useEffect)((function(){if(ce){var e=M.toLocaleLowerCase(),t=ce.filter((function(t){var c="".concat(t.roll.toLocaleLowerCase()," ").concat(t.name.toLocaleLowerCase()," ").concat(t.branch.toLowerCase()," cg:").concat(t.cgpi," sg:").concat(t.sgpi);return String(c).includes(e)}));$(t),me(M?t.length:null),H(0)}}),[M]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(E,{}),Object(d.jsx)(N,{branch:p,setBranch:f,batch:v,setBatch:k,page:Y,setPage:H,searchString:M,setSearchString:A,ranking:D,setRanking:F,cs:J,setCs:P,downloadCSV:function(){!function(e,t,c){var n="Rollno,Name,Branch,Sgpa,Cgpa\n",a=JSON.parse(JSON.stringify(e));a.sort((function(e,t){return Number(e.roll)-Number(t.roll)}));var s,r=Object(w.a)(a);try{for(r.s();!(s=r.n()).done;){var i=s.value;n+="".concat(i.roll,",").concat(i.name,",").concat(i.branch,",").concat(i.sgpi,",").concat(i.cgpi,"\n")}}catch(l){r.e(l)}finally{r.f()}var o=document.createElement("a");o.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download","".concat(t,"_").concat(c,".csv")),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}(z,p,v)}}),Object(d.jsxs)("div",{className:"query",onClick:function(){return document.execCommand("copy")},onCopy:function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain","https://nith.netlify.app/?".concat("FULL_COLLEGE"!==p?"branch=".concat(p,"&batch=").concat(v):"").concat("s"===J?"&cs=".concat(J):"").concat("S"!==D?"&r=".concat(D):"").concat(Y?"&p=".concat(Y):""))},title:"copy link",children:["\ud83d\udc24","?".concat("FULL_COLLEGE"!==p?"branch=".concat(p,"&batch=").concat(v):"").concat("s"===J?"&cs=".concat(J):"").concat("S"!==D?"&r=".concat(D):"").concat(Y?"&p=".concat(Y):"")]}),Object(d.jsx)("div",{id:"res_cnt",children:je?je+" results...":null}),Object(d.jsxs)("div",{className:"container",children:[re&&Object(d.jsx)(y,{indeterminate:!0,value:Number.isFinite(re)?re:null}),null===Z||void 0===Z?void 0:Z.slice(Y*R,Math.min(Y*R+R,Z.length)).map((function(e){return Object(d.jsx)(_,{stud:e,cs:J},e.roll)}))]}),Math.floor((null===Z||void 0===Z?void 0:Z.length)/R)?Object(d.jsxs)("div",{className:"pagination",children:[Object(d.jsx)("div",{className:"btn",onClick:function(){return H((function(e){return Math.max(0,e-1)}))},children:"Prev"}),Object(d.jsx)("div",{className:"page",children:Y+1}),Object(d.jsx)("div",{className:"btn",onClick:function(){return H((function(e){return Math.min(e+1,Math.floor(Z.length/R))}))},children:"Next"})]}):null,Object(d.jsx)(S,{hits:ue})]})}c(47);function F(e){e.history;var t=e.match,c=Object(n.useState)(),a=Object(i.a)(c,2),s=a[0],r=a[1];if(Object(n.useEffect)((function(){p(t.params.roll).then((function(e){r(e)}))}),[]),!s)return Object(d.jsx)("div",{className:"loading",children:"loading..."});var l=[8,7,6,5,4,3,2,1].map((function(e){return s.result.filter((function(t){return t.sem==e}))})).filter((function(e){return e.length}));return Object(d.jsxs)("div",{className:"fullResult",children:[Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{className:"stInfo",children:[Object(d.jsxs)("div",{className:"stDesc",children:[Object(d.jsx)("div",{className:"stName",children:s.name}),Object(d.jsxs)("div",{className:"stRoll",children:[s.roll," ",s.branch]})]}),Object(d.jsxs)("div",{className:"stcg",children:[Object(d.jsx)("div",{className:"cp",children:s.cgpi}),Object(d.jsx)("div",{className:"cp_total",children:s.summary[s.summary.length-1].cgpi_total})]}),Object(d.jsxs)("div",{className:"ranks",children:[Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.class.cgpi]})," class"]}),Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.year.cgpi]})," year"]}),Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.college.cgpi]})," college"]})]})]}),Object(d.jsx)("div",{className:"home",children:Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)(E,{})})})]}),Object(d.jsx)("div",{className:"stSemesters",children:l.map((function(e,t){return Object(d.jsxs)("div",{className:"sem",style:{animationDelay:.1*t+"s"},children:[Object(d.jsxs)("div",{className:"stsg",children:[Object(d.jsxs)("div",{className:"semN",children:["Sem ",e[0].sem]}),Object(d.jsxs)("div",{className:"sg_total",children:[" ","+",s.summary[e[0].sem-1].sgpi_total]}),Object(d.jsx)("div",{className:"sg",children:s.summary[e[0].sem-1].sgpi})]}),Object(d.jsx)("div",{className:"subs",children:e.map((function(e){return Object(d.jsxs)("div",{className:"sub",children:[Object(d.jsx)("div",{className:"code",children:e.subject}),Object(d.jsx)("div",{className:"grade ".concat(e.grade),children:Number(e.sub_gp)/Number(e.sub_point)})]},e.subject)}))})]},t)}))})]})}c(48);var I=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("dark"))),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(localStorage.getItem("VERSION")),r=Object(i.a)(s,2),b=r[0],j=r[1];return Object(n.useEffect)((function(){O().then((function(e){console.log("VERSION - ",e),j(e)})).catch((function(e){console.log("Failed to get Version.")}))}),[]),Object(n.useEffect)((function(){var e=document.querySelector(".dark_toggle .cover");!0===c?(localStorage.setItem("dark",!0),document.body.classList.add("dark"),e.style.width="1.7em",e.style.height="1.7em",e.style.background="#111"):(localStorage.setItem("dark",!1),document.body.classList.remove("dark"),e.style.width="2.5em",e.style.height="2.5em",e.style.background="#ffd700")}),[c]),Object(d.jsx)(o.a,{children:Object(d.jsxs)(u.Provider,{value:{darkMode:c,setDarkMode:a,version:b,setVersion:j},children:[Object(d.jsx)(h,{setDarkMode:a,darkMode:c}),Object(d.jsx)(l.a,{exact:!0,path:"/",component:D}),Object(d.jsx)(l.a,{exact:!0,path:"/r/:roll",component:F})]})})},U=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root")),U()}},[[49,1,2]]]);
//# sourceMappingURL=main.343ebade.chunk.js.map