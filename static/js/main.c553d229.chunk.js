(this["webpackJsonpnith-results"]=this["webpackJsonpnith-results"]||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},32:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(20),r=c.n(s),i=(c(29),c(3)),o=c(11),l=c(2),u=Object(n.createContext)({}),d=(c(30),c(0));function h(){var e=Object(n.useContext)(u),t=(e.darkMode,e.setDarkMode);return Object(d.jsx)("div",{className:"dark_toggle",onClick:function(){t((function(e){return!e}))},title:"toggle Dark Mode",children:Object(d.jsx)("div",{className:"cover"})})}var b=c(24),j=(c(32),c.p+"static/media/search.fd2a70fa.svg"),m=c(8),g=c.n(m),p=c(14),f=function(){var e=Object(p.a)(g.a.mark((function e(t){var c,n,a,s,r,i,o,l,u,d,h,b,j,m,p,f,O,x,v,N,k,S,L,C,E;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.branch,n=t.batch,a=t.setLoading,s=t.version,n=n.toString(),"FULL_COLLEGE"===c?r="FULL_COLLEGE":"FULL_YEAR"===c?r="FULL_YEAR - ".concat(n):(r="".concat(c," - ").concat(n),i&&(r+="&next_cursor=".concat(i))),a(!0),u=localStorage.getItem(s+":::"+r),d=!1,u)try{(o=JSON.parse(u)).expires&&(new Date(o.expires).getTime()>(new Date).getTime()?d=!0:(console.log("Cache Expired - ",s+":::"+r),localStorage.removeItem(s+":::"+r)))}catch(g){console.log("Parsing Error - ",g.message)}if(!d){e.next=14;break}l=o.data,i=null,console.log("CACHE HIT",s+":::"+r),a(!1),e.next=74;break;case 14:if("FULL_COLLEGE"!==c){e.next=35;break}console.log("FULL COLLEGE"),b=[],j="";case 18:return console.log("fetching data from "+j),e.next=21,fetch("https://nithp.herokuapp.com/api/result/student?limit=3000&next_cursor=".concat(j));case 21:return h=e.sent,e.next=24,h.json();case 24:m=e.sent,b=b.concat(m.data),j=m.pagination.next_cursor,p=b.length/3e3,a(100*p);case 29:if(""!=j){e.next=18;break}case 30:l=b,o={data:b,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 35:if("FULL_YEAR"!==c){e.next=56;break}console.log("FULL_YEAR"),O=[],x="";case 39:return console.log("fetching data from "+x),e.next=42,fetch("https://nithp.herokuapp.com/api/result/student?roll=".concat(n.slice(2),"%&limit=3000&next_cursor=").concat(x));case 42:return f=e.sent,e.next=45,f.json();case 45:v=e.sent,O=O.concat(v.data),x=v.pagination.next_cursor,N=O.length/3e3,a(100*N);case 50:if(""!=x){e.next=39;break}case 51:l=O,o={data:O,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 56:S=[],L="";case 58:return console.log("fetching data from "+L),e.next=61,fetch("https://nithp.herokuapp.com/api/result/student?branch=".concat(c,"&roll=").concat(n.slice(2),"%&limit=200&next_cursor=").concat(L));case 61:return k=e.sent,e.next=64,k.json();case 64:C=e.sent,S=S.concat(C.data),L=C.pagination.next_cursor,E=S.length/3e3,a(100*E);case 69:if(""!=L){e.next=58;break}case 70:l=S,o={data:S,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o));case 73:a(!1);case 74:return e.abrupt("return",l);case 75:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/student/".concat(t));case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/branches");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/last_updated");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function N(e){var t,c,a=e.branch,s=e.setBranch,r=e.batch,o=e.setBatch,l=e.ranking,u=e.setRanking,h=e.searchString,m=e.setSearchString,g=e.cs,p=e.setCs,f=e.downloadCSV,O=Object(n.useState)([]),v=Object(i.a)(O,2),N=v[0],k=v[1];Object(n.useEffect)((function(){x().then((function(e){e&&k([{name:"FULL_COLLEGE",batches:[]},{name:"FULL_YEAR",batches:e[0].batches}].concat(Object(b.a)(e)))})).catch((function(e){console.log(e)}))}),[]);return Object(d.jsxs)("div",{className:"ctrl",children:[Object(d.jsxs)("div",{className:"ser",children:[Object(d.jsx)("img",{src:j,alt:""}),Object(d.jsx)("input",{type:"search",value:h,onChange:function(e){m(e.target.value)},placeholder:"Search by RollNo Name Branch cg:6.9 sg:9:0"})]}),Object(d.jsx)("div",{className:"branch-con",children:Object(d.jsxs)("select",{name:"branch",id:"branch",title:"Branch",value:a,onChange:function(e){s(e.target.value);var t=N.find((function(t){return t.name==e.target.value}));"FULL_COLLEGE"===e.target.value||t.batches.includes(Number(r))||o(t.batches[t.batches.length-1])},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83d\udcd1 Branch"}),N.map((function(e){return Object(d.jsx)("option",{value:e.name,children:e.name},e.name)}))]})}),Object(d.jsx)("div",{className:"batch-con",children:Object(d.jsxs)("select",{name:"batch",id:"batch",title:"Batch",value:r,onChange:function(e){o(e.target.value)},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83c\udf93 Batch"}),null===(t=N.find((function(e){return e.name==a})))||void 0===t||null===(c=t.batches)||void 0===c?void 0:c.map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))]})}),Object(d.jsx)("div",{className:"cs",title:"sort: CGPA / SGPA",onClick:function(e){p((function(e){return"c"===e?"s":"c"}))},children:"c"===g?"Cg":"Sg"}),Object(d.jsx)("div",{className:"batch-con ranking-con",children:Object(d.jsxs)("select",{name:"ranking",id:"ranking",title:"Ranking",value:l,onChange:function(e){u(e.target.value)},children:[Object(d.jsx)("option",{disabled:!0,children:"\ud83c\udfc6 Ranking"}),Object(d.jsx)("option",{value:"S",children:"Standard '1224'"}),Object(d.jsx)("option",{value:"D",children:"Dense '1223'"}),Object(d.jsx)("option",{value:"O",children:"Ordinal '1234'"})]})}),Object(d.jsx)("div",{className:"csv",onClick:f,title:"download result csv",children:Object(d.jsx)("span",{children:"\ud83c\udf67"})})]})}var k=c(23);c(35);function S(e){var t=e.hits;return Object(d.jsxs)("div",{className:"footer",children:[Object(d.jsx)(k.a,{href:"https://github.com/RohitKaushal7/nith-results","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-icon":"octicon-star","data-show-count":"true","aria-label":"Star RohitKaushal7/nith-results on GitHub",children:"Star"}),Object(d.jsxs)("span",{id:"me",children:["Made with ",Object(d.jsx)("span",{className:"heart",children:"\u2764"})," by"," ",Object(d.jsx)("a",{href:"https://github.com/RohitKaushal7",children:"Rohit Kaushal"}),"."]}),Object(d.jsxs)("span",{id:"ref",children:["API : ",Object(d.jsx)("a",{href:"https://nithp.herokuapp.com/",children:"nithp.herokuapp.com/"})]}),Object(d.jsx)("span",{id:"count",children:t||"hits"})]})}c(36);var L=c.p+"static/media/hero.d2dd3494.png";function C(e){var t=e.lastUpdated;return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("img",{src:L,alt:"",className:"logo"}),Object(d.jsxs)("div",{className:"main-heading",children:[Object(d.jsx)("b",{children:"NITH RESULTS"}),Object(d.jsx)("span",{className:"date",children:new Date(t).toDateString()})]})]})}c(37);function E(e){var t=e.value,c=e.indeterminate;return Object(d.jsxs)("div",{className:"progress",children:[c&&Object(d.jsx)("div",{className:"indeterminate"}),t&&Object(d.jsx)("div",{className:"determinate",style:{width:t+"%"}})]})}c(38);c(39);function y(e){var t=e.stud,c=e.cs,n="c"===c?t.cgpi:t.sgpi,a="c"===c?t.sgpi:t.cgpi,s=Number(n)>=9.5&&Number(n)<10?"9.5":parseInt(n);return Object(d.jsx)(o.b,{to:"/r/".concat(t.roll),children:Object(d.jsxs)("div",{className:"card","data-rank":t.Rank,"data-base":s,children:[Object(d.jsxs)("div",{className:"rank",children:["#_",t.Rank]}),Object(d.jsx)("div",{className:"name",children:t.name}),Object(d.jsx)("div",{className:"rollno",children:t.roll}),Object(d.jsx)("div",{className:"cgpa",children:n}),Object(d.jsx)("div",{className:"sgpa",children:a}),Object(d.jsx)("div",{className:"branch",children:t.branch}),Object(d.jsx)("div",{className:"year",children:t.roll.slice(0,2)})]})})}c(45);var _=c(22),w=100;function R(e){var t=e.history,c=t.location.search,a=new URLSearchParams(c),s=a.get("branch")?a.get("branch").toUpperCase():null,r=a.get("batch"),o=["S","D","O"].includes(a.get("r"))?a.get("r"):null,l=a.get("q"),h=["c","s"].includes(a.get("cs"))?a.get("cs"):null,b=Number(a.get("p"))&&Number(a.get("p"))>=0?Number(a.get("p")):null,j=Object(n.useState)(localStorage.getItem("VERSION")),m=Object(i.a)(j,2),g=m[0],p=m[1],O=Object(n.useState)(s||"FULL_COLLEGE"),x=Object(i.a)(O,2),k=x[0],L=x[1],R=Object(n.useState)(r||((new Date).getFullYear()-1).toString()),D=Object(i.a)(R,2),F=D[0],I=D[1],U=Object(n.useState)(o||"S"),M=Object(i.a)(U,2),A=M[0],G=M[1],B=Object(n.useState)(l||""),J=Object(i.a)(B,2),T=J[0],P=J[1],V=Object(n.useState)(h||"c"),Y=Object(i.a)(V,2),H=Y[0],K=Y[1],q=Object(n.useState)(b||0),z=Object(i.a)(q,2),Q=z[0],W=z[1],X=Object(n.useState)(),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(),ce=Object(i.a)(te,2),ne=ce[0],ae=ce[1],se=Object(n.useState)(),re=Object(i.a)(se,2),ie=re[0],oe=re[1],le=Object(n.useState)(),ue=Object(i.a)(le,2),de=ue[0],he=ue[1],be=Object(n.useState)(),je=Object(i.a)(be,2),me=je[0],ge=je[1],pe=Object(n.useState)(),fe=Object(i.a)(pe,2),Oe=fe[0],xe=fe[1],ve=Object(n.useContext)(u);ve.darkMode,ve.setDarkMode;Object(n.useEffect)((function(){v().then((function(e){console.log("VERSION - ",e),p(e)})).catch((function(e){console.log("Failed to get Version.")})),window.location.host.includes("localhost")||fetch("https://api.countapi.xyz/hit/rohitkaushal7/nith_results").then((function(e){return e.json()})).then((function(e){ge(e.value)}))}),[]),Object(n.useEffect)((function(){if(g&&localStorage.getItem("VERSION")!=g){localStorage.setItem("VERSION",g),console.log("Clearing Cache for New Version.");for(var e=0;e<100;++e){var t=localStorage.key(e);if(!t)break;t.includes(":::")&&(console.log("CLEARED CACHE - ",t),localStorage.removeItem(t))}}}),[g]),Object(n.useEffect)((function(){g&&f({batch:F,branch:k,setLoading:he,version:g}).then((function(e){e=e.sort((function(e,t){return"c"===H?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),ee(e)})).catch((function(e){console.error("Failed to Fetch. Err - ",e.message)}))}),[k,F,g]),Object(n.useEffect)((function(){if($){var e=JSON.parse(JSON.stringify($));switch(e.sort((function(e,t){return"c"===H?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),A){case"S":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&(c=n+1),e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&(c=a+1),e[a].Rank=c;return e}(e,H);break;case"D":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&c++,e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&c++,e[a].Rank=c;return e}(e,H);break;case"O":e=function(e,t){return e.forEach((function(e,t){e.Rank=t+1})),e}(e)}oe(e),ae(e)}}),[A,$,H]),Object(n.useEffect)((function(){t.replace("/?".concat("FULL_COLLEGE"!==k?"branch=".concat(k,"&batch=").concat(F):"").concat("s"===H?"&cs=".concat(H):"").concat("S"!==A?"&r=".concat(A):"").concat(Q?"&p=".concat(Q):""))}),[k,F,A,H,Q]),Object(n.useEffect)((function(){if(ie){var e=T.toLocaleLowerCase(),t=ie.filter((function(t){var c="".concat(t.roll.toLocaleLowerCase()," ").concat(t.name.toLocaleLowerCase()," ").concat(t.branch.toLowerCase()," cg:").concat(t.cgpi," sg:").concat(t.sgpi);return String(c).includes(e)}));ae(t),xe(T?t.length:null)}}),[T]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(C,{lastUpdated:g}),Object(d.jsx)(N,{branch:k,setBranch:L,batch:F,setBatch:I,searchString:T,setSearchString:P,ranking:A,setRanking:G,cs:H,setCs:K,downloadCSV:function(){!function(e,t,c){var n="Rollno,Name,Branch,Sgpa,Cgpa\n",a=JSON.parse(JSON.stringify(e));a.sort((function(e,t){return Number(e.roll)-Number(t.roll)}));var s,r=Object(_.a)(a);try{for(r.s();!(s=r.n()).done;){var i=s.value;n+="".concat(i.roll,",").concat(i.name,",").concat(i.branch,",").concat(i.sgpi,",").concat(i.cgpi,"\n")}}catch(l){r.e(l)}finally{r.f()}var o=document.createElement("a");o.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download","".concat(t,"_").concat(c,".csv")),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}($,k,F)}}),Object(d.jsxs)("div",{className:"query",onClick:function(){return document.execCommand("copy")},onCopy:function(e){e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain","https://nith.netlify.app/?".concat("FULL_COLLEGE"!==k?"branch=".concat(k,"&batch=").concat(F):"").concat("s"===H?"&cs=".concat(H):"").concat("S"!==A?"&r=".concat(A):"").concat(Q?"&p=".concat(Q):""))},title:"copy link",children:["\ud83d\udc24","?".concat("FULL_COLLEGE"!==k?"branch=".concat(k,"&batch=").concat(F):"").concat("s"===H?"&cs=".concat(H):"").concat("S"!==A?"&r=".concat(A):"").concat(Q?"&p=".concat(Q):"")]}),Object(d.jsx)("div",{id:"res_cnt",children:Oe?Oe+" results...":null}),Object(d.jsxs)("div",{className:"container",children:[de&&Object(d.jsx)(E,{indeterminate:!0,value:Number.isFinite(de)?de:null}),null===ne||void 0===ne?void 0:ne.slice(Q*w,Math.min(Q*w+w,ne.length)).map((function(e){return Object(d.jsx)(y,{stud:e,cs:H},e.roll)}))]}),Math.floor((null===ne||void 0===ne?void 0:ne.length)/w)?Object(d.jsxs)("div",{className:"pagination",children:[Object(d.jsx)("div",{className:"btn",onClick:function(){return W((function(e){return Math.max(0,e-1)}))},children:"Prev"}),Object(d.jsx)("div",{className:"page",children:Q+1}),Object(d.jsx)("div",{className:"btn",onClick:function(){return W((function(e){return Math.min(e+1,Math.floor(ne.length/w))}))},children:"Next"})]}):null,Object(d.jsx)(S,{hits:me})]})}c(46);function D(e){e.history;var t=e.match,c=Object(n.useState)(),a=Object(i.a)(c,2),s=a[0],r=a[1];if(Object(n.useEffect)((function(){O(t.params.roll).then((function(e){r(e)}))}),[]),!s)return Object(d.jsx)("div",{className:"loading",children:"loading..."});var l=[8,7,6,5,4,3,2,1].map((function(e){return s.result.filter((function(t){return t.sem==e}))})).filter((function(e){return e.length}));return Object(d.jsxs)("div",{className:"fullResult",children:[Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{className:"stInfo",children:[Object(d.jsxs)("div",{className:"stDesc",children:[Object(d.jsx)("div",{className:"stName",children:s.name}),Object(d.jsxs)("div",{className:"stRoll",children:[s.roll," ",s.branch]})]}),Object(d.jsxs)("div",{className:"stcg",children:[Object(d.jsx)("div",{className:"cp",children:s.cgpi}),Object(d.jsx)("div",{className:"cp_total",children:s.summary[s.summary.length-1].cgpi_total})]}),Object(d.jsxs)("div",{className:"ranks",children:[Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.class.cgpi]})," class"]}),Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.year.cgpi]})," year"]}),Object(d.jsxs)("div",{className:"rk",children:[Object(d.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.college.cgpi]})," college"]})]})]}),Object(d.jsx)("div",{className:"home",children:Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)(C,{})})})]}),Object(d.jsx)("div",{className:"stSemesters",children:l.map((function(e,t){return Object(d.jsxs)("div",{className:"sem",style:{animationDelay:.1*t+"s"},children:[Object(d.jsxs)("div",{className:"stsg",children:[Object(d.jsxs)("div",{className:"semN",children:["Sem ",e[0].sem]}),Object(d.jsxs)("div",{className:"sg_total",children:[" ","+",s.summary[e[0].sem-1].sgpi_total]}),Object(d.jsx)("div",{className:"sg",children:s.summary[e[0].sem-1].sgpi})]}),Object(d.jsx)("div",{className:"subs",children:e.map((function(e){return Object(d.jsxs)("div",{className:"sub",children:[Object(d.jsx)("div",{className:"code",children:e.subject}),Object(d.jsx)("div",{className:"grade ".concat(e.grade),children:Number(e.sub_gp)/Number(e.sub_point)})]},e.subject)}))})]},t)}))})]})}c(47);var F=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("dark"))),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=document.querySelector(".dark_toggle .cover");!0===c?(localStorage.setItem("dark",!0),document.body.classList.add("dark"),e.style.width="1.7em",e.style.height="1.7em",e.style.background="#111"):(localStorage.setItem("dark",!1),document.body.classList.remove("dark"),e.style.width="2.5em",e.style.height="2.5em",e.style.background="#ffd700")}),[c]),Object(d.jsx)(o.a,{children:Object(d.jsxs)(u.Provider,{value:{darkMode:c,setDarkMode:a},children:[Object(d.jsx)(h,{setDarkMode:a,darkMode:c}),Object(d.jsx)(l.a,{exact:!0,path:"/",component:R}),Object(d.jsx)(l.a,{exact:!0,path:"/r/:roll",component:D})]})})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,49)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root")),I()}},[[48,1,2]]]);
//# sourceMappingURL=main.c553d229.chunk.js.map